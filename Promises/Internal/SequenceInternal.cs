#if PROTO_PROMISE_DEBUG_ENABLE || (!PROTO_PROMISE_DEBUG_DISABLE && DEBUG) #define PROMISE_DEBUG #else #undef PROMISE_DEBUG #endif #if !PROTO_PROMISE_PROGRESS_DISABLE #define PROMISE_PROGRESS #else #undef PROMISE_PROGRESS #endif  using System; using System.Collections.Generic;  namespace Proto.Promises {     partial class Promise     {         partial class Internal         {             public static Promise _Sequence<TEnumerator>(TEnumerator promiseFuncs) where TEnumerator : IEnumerator<Func<Promise>>             {                 ValidateArgument(promiseFuncs, "promiseFuncs", 2);                  if (!promiseFuncs.MoveNext())                 {                     return Resolved();                 }

                // Invoke funcs async and normalize the progress.
                var newPromise = PromiseResolvePromise<DelegateVoidPromise>.GetOrCreate();                 newPromise.resolver = new DelegateVoidPromise(promiseFuncs.Current);                 newPromise._valueOrPrevious = ResolveContainerVoid.GetOrCreate();                 newPromise.ResetDepth();                 AddToHandleQueueBack(newPromise);                  Promise promise = newPromise;                 while (promiseFuncs.MoveNext())                 {                     promise = promise.Then(promiseFuncs.Current);                 }
                return promise;             }         }     } }